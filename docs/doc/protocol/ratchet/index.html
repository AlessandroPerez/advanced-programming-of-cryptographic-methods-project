<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module implements the Double Ratchet algorithm, a core component for secure, asynchronous messaging. The Double Ratchet ensures forward secrecy and post-compromise security by combining symmetric-key and Diffie-Hellman ratcheting. It manages the cryptographic state for sending and receiving messages, handling key derivation, message encryption, and decryption, including mechanisms for skipping and reordering messages. For more information, see the Signal Protocol specification."><title>protocol::ratchet - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-492a78a4a87dcc01.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="protocol" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0 (f6e511eec 2024-10-15)" data-channel="1.82.0" data-search-js="search-a99f1315e7cc5121.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-921df33f47b8780c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../protocol/index.html">protocol</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">Module ratchet</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate protocol</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">protocol</a>::<wbr><a class="mod" href="#">ratchet</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/protocol/ratchet.rs.html#1-598">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This module implements the Double Ratchet algorithm, a core component for secure, asynchronous messaging.
The Double Ratchet ensures forward secrecy and post-compromise security by combining symmetric-key and Diffie-Hellman ratcheting.
It manages the cryptographic state for sending and receiving messages, handling key derivation, message encryption,
and decryption, including mechanisms for skipping and reordering messages.
For more information, see the <a href="https://signal.org/docs/specifications/doubleratchet/">Signal Protocol specification</a>.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Header.html" title="struct protocol::ratchet::Header">Header</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">A <a href="struct.Header.html" title="struct protocol::ratchet::Header"><code>Header</code></a> represents a Double Ratchet header containing key and message state metadata for the encrypted message.</div></li><li><div class="item-name"><a class="struct" href="struct.Ratchet.html" title="struct protocol::ratchet::Ratchet">Ratchet</a></div><div class="desc docblock-short">A <a href="struct.Ratchet.html" title="struct protocol::ratchet::Ratchet"><code>Ratchet</code></a> represents the Double Ratchet state used for secure message encryption and decryption.</div></li><li><div class="item-name"><a class="struct" href="struct.RatchetKeyPair.html" title="struct protocol::ratchet::RatchetKeyPair">Ratchet<wbr>KeyPair</a></div><div class="desc docblock-short">A <a href="struct.RatchetKeyPair.html" title="struct protocol::ratchet::RatchetKeyPair"><code>RatchetKeyPair</code></a> consists of a public and private key,
used in the Diffie-Hellman ratchet process to generate new key pairs and perform key exchanges.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.hkdf_ck.html" title="fn protocol::ratchet::hkdf_ck">hkdf_ck</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Derives a new chain key and message key from the current chain key using HKDF.
This function applies HKDF with SHA-256 to derive two secrets from a single chain key:
the next chain key and a message encryption key. This step is used for each message sent or received
in the Double Ratchet protocol to ensure forward secrecy.</div></li><li><div class="item-name"><a class="fn" href="fn.hkdf_rk.html" title="fn protocol::ratchet::hkdf_rk">hkdf_rk</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Derives a new root key and chain key from the current root key and a Diffie-Hellman shared secret.
This function implements the <code>HKDF(rk, dh)</code> step from the Double Ratchet algorithm, using the current
root key <code>rk</code> and a new shared secret <code>dh</code> as inputs. It applies HKDF with SHA-256 to produce two
new secrets: a derived root key and a new receiving chain key.</div></li></ul></section></div></main></body></html>